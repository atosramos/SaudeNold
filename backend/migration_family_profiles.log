2026-01-26 17:13:53,884 - INFO - Iniciando migração para suporte a perfis familiares...
2026-01-26 17:13:53,884 - INFO - Modo DRY RUN ativado
2026-01-26 17:13:53,952 - INFO - Validando estado do banco antes da migração...
2026-01-26 17:13:53,991 - INFO - Total de usuários: 13
2026-01-26 17:13:53,996 - INFO - === MODO DRY RUN - Nenhuma alteração será feita ===
2026-01-26 17:13:53,996 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS families (
        id SERIAL PRIMARY KEY,
        name VARCHAR(255) ...
2026-01-26 17:13:53,996 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_profiles (
        id SERIAL PRIMARY KEY,
        family_id I...
2026-01-26 17:13:53,996 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_caregivers (
        id SERIAL PRIMARY KEY,
        profile_i...
2026-01-26 17:13:53,996 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_profile_links (
        id SERIAL PRIMARY KEY,
        family...
2026-01-26 17:13:53,998 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_invites (
        id SERIAL PRIMARY KEY,
        family_id IN...
2026-01-26 17:13:53,998 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_data_shares (
        id SERIAL PRIMARY KEY,
        family_i...
2026-01-26 17:13:53,998 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS family_id INTEGER...
2026-01-26 17:13:53,998 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS account_type VARCHAR(50) DEFAULT 'family_admin'...
2026-01-26 17:13:53,998 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS created_by INTEGER...
2026-01-26 17:13:53,999 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS permissions JSON...
2026-01-26 17:13:53,999 - INFO - [DRY RUN] Executaria: ALTER TABLE medications ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:13:53,999 - INFO - [DRY RUN] Executaria: ALTER TABLE medication_logs ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:13:53,999 - INFO - [DRY RUN] Executaria: ALTER TABLE emergency_contacts ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:13:53,999 - INFO - [DRY RUN] Executaria: ALTER TABLE doctor_visits ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:13:53,999 - INFO - [DRY RUN] Executaria: ALTER TABLE medical_exams ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:13:53,999 - INFO - [DRY RUN] Executaria: ALTER TABLE exam_data_points ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:13:53,999 - INFO - === DRY RUN concluído - Nenhuma alteração foi feita ===
2026-01-26 17:13:53,999 - INFO - Migração concluída com sucesso!
2026-01-26 17:14:55,929 - INFO - Iniciando migração para suporte a perfis familiares...
2026-01-26 17:14:55,929 - INFO - Modo DRY RUN ativado
2026-01-26 17:14:55,989 - INFO - Validando estado do banco antes da migração...
2026-01-26 17:14:56,024 - INFO - Total de usuários: 13
2026-01-26 17:14:56,029 - INFO - === MODO DRY RUN - Nenhuma alteração será feita ===
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS families (
        id SERIAL PRIMARY KEY,
        name VARCHAR(255) ...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_profiles (
        id SERIAL PRIMARY KEY,
        family_id I...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_caregivers (
        id SERIAL PRIMARY KEY,
        profile_i...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_profile_links (
        id SERIAL PRIMARY KEY,
        family...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_invites (
        id SERIAL PRIMARY KEY,
        family_id IN...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_data_shares (
        id SERIAL PRIMARY KEY,
        family_i...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS family_id INTEGER...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS account_type VARCHAR(50) DEFAULT 'family_admin'...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS created_by INTEGER...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS permissions JSON...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE medications ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE medication_logs ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE emergency_contacts ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE doctor_visits ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE medical_exams ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:14:56,029 - INFO - [DRY RUN] Executaria: ALTER TABLE exam_data_points ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:14:56,029 - INFO - === DRY RUN concluído - Nenhuma alteração foi feita ===
2026-01-26 17:14:56,029 - INFO - Migração concluída com sucesso!
2026-01-26 17:15:05,978 - INFO - Iniciando migração para suporte a perfis familiares...
2026-01-26 17:15:06,042 - INFO - Validando estado do banco antes da migração...
2026-01-26 17:15:06,084 - INFO - Total de usuários: 13
2026-01-26 17:15:06,089 - INFO - Criando backup do estado atual...
2026-01-26 17:15:06,141 - INFO - Backup salvo em: migration_backup_20260126_171506.json
2026-01-26 17:15:06,141 - INFO - Executando migração 1/16...
2026-01-26 17:15:06,143 - INFO - Executando migração 2/16...
2026-01-26 17:15:06,145 - INFO - Executando migração 3/16...
2026-01-26 17:15:06,145 - INFO - Executando migração 4/16...
2026-01-26 17:15:06,146 - INFO - Executando migração 5/16...
2026-01-26 17:15:06,146 - INFO - Executando migração 6/16...
2026-01-26 17:15:06,146 - INFO - Executando migração 7/16...
2026-01-26 17:15:06,147 - INFO - Executando migração 8/16...
2026-01-26 17:15:06,147 - INFO - Executando migração 9/16...
2026-01-26 17:15:06,147 - INFO - Executando migração 10/16...
2026-01-26 17:15:06,148 - INFO - Executando migração 11/16...
2026-01-26 17:15:06,148 - INFO - Executando migração 12/16...
2026-01-26 17:15:06,148 - INFO - Executando migração 13/16...
2026-01-26 17:15:06,148 - INFO - Executando migração 14/16...
2026-01-26 17:15:06,149 - INFO - Executando migração 15/16...
2026-01-26 17:15:06,150 - INFO - Executando migração 16/16...
2026-01-26 17:15:06,151 - INFO - Migração concluída com sucesso!
2026-01-26 17:15:06,151 - INFO - Migração concluída com sucesso!
2026-01-26 17:15:58,576 - INFO - Iniciando migração para suporte a perfis familiares...
2026-01-26 17:15:58,576 - INFO - Modo DRY RUN ativado
2026-01-26 17:15:58,642 - INFO - Validando estado do banco antes da migração...
2026-01-26 17:15:58,679 - INFO - Total de usuários: 13
2026-01-26 17:15:58,684 - INFO - === MODO DRY RUN - Nenhuma alteração será feita ===
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS families (
        id SERIAL PRIMARY KEY,
        name VARCHAR(255) ...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_profiles (
        id SERIAL PRIMARY KEY,
        family_id I...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_caregivers (
        id SERIAL PRIMARY KEY,
        profile_i...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_profile_links (
        id SERIAL PRIMARY KEY,
        family...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_invites (
        id SERIAL PRIMARY KEY,
        family_id IN...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: 
    CREATE TABLE IF NOT EXISTS family_data_shares (
        id SERIAL PRIMARY KEY,
        family_i...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS family_id INTEGER...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS account_type VARCHAR(50) DEFAULT 'family_admin'...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS created_by INTEGER...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE users ADD COLUMN IF NOT EXISTS permissions JSON...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE medications ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE medication_logs ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE emergency_contacts ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE doctor_visits ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE medical_exams ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:15:58,684 - INFO - [DRY RUN] Executaria: ALTER TABLE exam_data_points ADD COLUMN IF NOT EXISTS profile_id INTEGER...
2026-01-26 17:15:58,684 - INFO - === DRY RUN concluído - Nenhuma alteração foi feita ===
2026-01-26 17:15:58,684 - INFO - Migração concluída com sucesso!
