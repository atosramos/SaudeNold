## Objetivo
Implementar sistema de convites para permitir que adultos se juntem a uma famÃ­lia atravÃ©s de convites por email ou cÃ³digo.

## Contexto Atual
App mobile (Expo/React Native) offline-first. Convites podem ser preparados offline e enviados quando houver conectividade.

## Tarefas
- [x] Implementar geraÃ§Ã£o de convites
  - [x] FunÃ§Ã£o `generate_invite_code()` para gerar cÃ³digo seguro âœ…
  - [x] Endpoint `POST /api/family/invite-adult` para criar convite âœ…
  - [x] Campos: cÃ³digo, family_id, inviter_id, invitee_email, status, expires_at âœ…
  - [x] ValidaÃ§Ã£o de email do convidado âœ…
  - [x] Verificar se email jÃ¡ estÃ¡ em outra famÃ­lia âœ…
  - [x] ExpiraÃ§Ã£o de 7 dias âœ…
  - [x] Gerar QR Code para vinculaÃ§Ã£o presencial âœ…
- [x] Implementar envio de convites por email
  - [x] Template de email de convite âœ…
  - [x] Incluir nome do convidante âœ…
  - [x] Incluir cÃ³digo de convite âœ…
  - [x] Link direto para aceitar convite (se aplicÃ¡vel) âœ…
  - [x] FunÃ§Ã£o `send_family_invite_email()` âœ…
- [ ] Implementar convite via WhatsApp
  - [ ] Gerar link de convite compartilhÃ¡vel
  - [ ] Template de mensagem com cÃ³digo e instruÃ§Ãµes
- [x] Implementar aceitaÃ§Ã£o de convites
  - [x] Endpoint `POST /api/family/accept-invite` para aceitar âœ…
  - [x] Validar cÃ³digo de convite âœ…
  - [x] Verificar se convite nÃ£o expirou âœ…
  - [x] Verificar se convite nÃ£o foi aceito anteriormente âœ…
  - [x] Associar usuÃ¡rio Ã  famÃ­lia âœ…
  - [x] Atualizar status do convite para 'accepted' âœ…
  - [x] Definir `account_type: 'adult_member'` âœ…
  - [x] UI para aceitar convite âœ… `app/family/accept-invite.js`
- [x] Implementar gerenciamento de convites
  - [x] Endpoint para listar convites pendentes (`GET /api/family/invites`) âœ…
  - [x] Endpoint para cancelar convite (`DELETE /api/family/invite/:inviteId`) âœ…
  - [x] Endpoint para reenviar convite (`POST /api/family/invite/:inviteId/resend`) âœ…
  - [x] UI para gerenciar convites enviados âœ… `app/family/invites.js`
- [x] Implementar validaÃ§Ãµes e seguranÃ§a
  - [x] Apenas family_admin pode enviar convites âœ…
  - [x] Verificar se usuÃ¡rio jÃ¡ estÃ¡ em uma famÃ­lia âœ…
  - [x] Limitar nÃºmero de convites pendentes por famÃ­lia âœ…
  - [x] Rate limiting no envio de convites âœ…

## Arquivos Criados/Modificados
- âœ… `backend/models.py` - Modelo `FamilyInvite` implementado
- âœ… `backend/main.py` - Endpoints de convites implementados:
  - âœ… `POST /api/family/invite-adult`
  - âœ… `POST /api/family/accept-invite`
  - âœ… `GET /api/family/invites`
  - âœ… `DELETE /api/family/invite/{invite_id}`
  - âœ… `POST /api/family/invite/{invite_id}/resend`
- âœ… `backend/schemas.py` - Schemas de convites
- âœ… ServiÃ§o de email para envio de convites
- âœ… `app/family/invites.js` - UI para gerenciar convites âœ…
- âœ… `app/family/accept-invite.js` - UI para aceitar convite âœ…
- âœ… `services/familyService.js` - ServiÃ§o de convites no frontend âœ…

## Status
ğŸŸ¢ **Quase Completo**
- âœ… Backend: 100% implementado
- âœ… Frontend: UI completa implementada
- âŒ Convite via WhatsApp: Pendente (opcional)

## Prioridade
ğŸŸ¡ MÃ©dia

## ReferÃªncias
- EspecificaÃ§Ã£o tÃ©cnica: SeÃ§Ã£o 2.3.2 - Sistema de Convites
- [Python secrets module](https://docs.python.org/3/library/secrets.html)
