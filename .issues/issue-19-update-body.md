## Objetivo
Implementar sistema completo de tokens JWT com access tokens de curta duraÃ§Ã£o e refresh tokens de longa duraÃ§Ã£o, incluindo renovaÃ§Ã£o automÃ¡tica.

## Contexto Atual
App mobile (Expo/React Native) offline-first. Backend Ã© opcional e pode ser usado apenas para sincronizaÃ§Ã£o. Tokens devem considerar modo offline e reconexÃ£o segura.

## Tarefas
- [x] Implementar geraÃ§Ã£o de tokens no backend
  - [x] FunÃ§Ã£o `create_access_token()` - token de 15 a 30 minutos (configurÃ¡vel) âœ…
  - [x] FunÃ§Ã£o `create_refresh_token()` - token de 30 dias âœ…
  - [x] Incluir user_id, email, role no payload âœ…
  - [x] Gerar token_id Ãºnico para refresh tokens âœ…
  - [x] Armazenar refresh tokens no banco de dados âœ…
  - [x] Campos: token_id, user_id, created_at, expires_at, revoked âœ…
- [x] Implementar renovaÃ§Ã£o de tokens
  - [x] Endpoint `/api/auth/refresh` para renovar access token âœ…
  - [x] Validar refresh token âœ…
  - [x] Verificar se token nÃ£o foi revogado âœ…
  - [x] Verificar se token nÃ£o expirou âœ…
  - [x] Gerar novo access token âœ…
  - [x] Opcionalmente gerar novo refresh token (rotacionar) âœ…
- [x] Implementar gerenciamento de tokens no frontend
  - [x] Classe `TokenManager` para gerenciar tokens âœ…
  - [x] Armazenar tokens no SecureStore (React Native) âœ…
  - [x] Implementar renovaÃ§Ã£o automÃ¡tica antes da expiraÃ§Ã£o âœ…
  - [x] Agendar renovaÃ§Ã£o em 13 minutos (antes dos 15) âœ…
  - [x] Interceptar requisiÃ§Ãµes para adicionar token âœ…
  - [x] Tratar erro 401 e tentar renovar token âœ…
  - [x] Logout automÃ¡tico se refresh falhar âœ…
- [x] Implementar revogaÃ§Ã£o de tokens
  - [x] Endpoint para revogar refresh token (`POST /api/auth/revoke`) âœ…
  - [x] Endpoint para revogar todos os tokens do usuÃ¡rio (`POST /api/auth/revoke-all`) âœ…
  - [x] Marcar tokens como revoked no banco âœ…
  - [x] Limpar tokens revogados periodicamente (job em background) âœ…
- [x] Implementar blacklist de tokens (opcional, para logout imediato)
  - [x] Armazenar tokens revogados em cache (Redis) âœ…
  - [x] Verificar blacklist em middleware de autenticaÃ§Ã£o âœ…
  - [x] TTL igual ao tempo de expiraÃ§Ã£o do token âœ…

## Arquivos Criados/Modificados
- âœ… `backend/auth.py` - FunÃ§Ãµes de geraÃ§Ã£o e validaÃ§Ã£o de tokens
- âœ… `backend/main.py` - Endpoints de refresh e revogaÃ§Ã£o
- âœ… `backend/models.py` - Modelo RefreshToken
- âœ… `backend/services/token_blacklist.py` - Blacklist de tokens em Redis
- âœ… `services/tokenManager.js` - Gerenciador de tokens (renovaÃ§Ã£o automÃ¡tica)
- âœ… `services/api.js` - Cliente HTTP com interceptors
- âœ… `services/auth.js` - FunÃ§Ãµes de autenticaÃ§Ã£o
- âœ… `services/authStorage.js` - Armazenamento seguro de tokens

## VariÃ¡veis de Ambiente
- `JWT_SECRET_KEY` - Chave secreta para assinar tokens âœ…
- `ACCESS_TOKEN_EXPIRE_MINUTES` - Tempo de expiraÃ§Ã£o (padrÃ£o: 30; faixa recomendada 15-30) âœ…
- `REFRESH_TOKEN_EXPIRE_DAYS` - Tempo de expiraÃ§Ã£o (padrÃ£o: 30) âœ…

## ReferÃªncias
- EspecificaÃ§Ã£o tÃ©cnica: SeÃ§Ã£o 1.2 - Sistema de Tokens JWT
- [JWT RFC 7519](https://tools.ietf.org/html/rfc7519)
- [PyJWT documentation](https://pyjwt.readthedocs.io/)

## Prioridade
ğŸ”´ Alta (MVP)
